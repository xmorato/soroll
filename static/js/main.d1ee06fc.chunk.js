(this["webpackJsonpdashboard-mui"]=this["webpackJsonpdashboard-mui"]||[]).push([[0],{233:function(e,t,n){e.exports=n(247)},238:function(e,t,n){},239:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(20),o=n.n(r),i=(n(238),n(34)),c=(n(239),n(224)),s=n(76),u=n(264),d=n(265),f=n(218),m=n.n(f),p=n(217),b=n.n(p),g=n(77);function E(){var e=Object(s.a)(["\n  width: 300px;\n  margin: 2px 0 0;\n  padding: 0;\n  position: absolute;\n  list-style: none;\n  background-color: #fff;\n  overflow: auto;\n  max-height: 250px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  z-index: 1;\n\n  & li {\n    padding: 5px 12px;\n    display: flex;\n\n    & span {\n      flex-grow: 1;\n    }\n\n    & svg {\n      color: transparent;\n    }\n  }\n\n  & li[aria-selected='true'] {\n    background-color: #fafafa;\n    font-weight: 600;\n\n    & svg {\n      color: #1890ff;\n    }\n  }\n\n  & li[data-focus='true'] {\n    background-color: #e6f7ff;\n    cursor: pointer;\n\n    & svg {\n      color: #000;\n    }\n  }\n"]);return E=function(){return e},e}function h(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  height: 24px;\n  margin: 2px;\n  line-height: 22px;\n  background-color: #fafafa;\n  border: 1px solid #e8e8e8;\n  border-radius: 2px;\n  box-sizing: content-box;\n  padding: 0 4px 0 10px;\n  outline: 0;\n  overflow: hidden;\n\n  &:focus {\n    border-color: #40a9ff;\n    background-color: #e6f7ff;\n  }\n\n  & span {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n\n  & svg {\n    font-size: 12px;\n    cursor: pointer;\n    padding: 4px;\n  }\n"]);return h=function(){return e},e}function x(){var e=Object(s.a)(["\n  width: 300px;\n  border: 1px solid #d9d9d9;\n  background-color: #fff;\n  border-radius: 4px;\n  padding: 1px;\n  display: flex;\n  flex-wrap: wrap;\n\n  &:hover {\n    border-color: #40a9ff;\n  }\n\n  &.focused {\n    border-color: #40a9ff;\n    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\n  }\n\n  & input {\n    font-size: 14px;\n    height: 30px;\n    box-sizing: border-box;\n    padding: 4px 6px;\n    width: 0;\n    min-width: 30px;\n    flex-grow: 1;\n    border: 0;\n    margin: 0;\n    outline: 0;\n  }\n"]);return x=function(){return e},e}function v(){var e=Object(s.a)(["\n  padding: 0 0 4px;\n  line-height: 1.5;\n  display: block;\n"]);return v=function(){return e},e}var w=Object(g.a)("label")(v()),j=Object(g.a)("div")(x()),y=Object(g.a)((function(e){var t=e.label,n=e.onDelete,a=Object(c.a)(e,["label","onDelete"]);return l.a.createElement("div",a,l.a.createElement("span",null,t),l.a.createElement(b.a,{onClick:n}))}))(h()),O=Object(g.a)("ul")(E());function k(e){var t=e.setSelected,n=Object(u.a)({id:"customized-hook-demo",defaultValue:[],multiple:!0,options:e.incidences,getOptionSelected:function(e,t){return e.title===t.title},getOptionLabel:function(e){return e.title}}),r=n.getRootProps,o=n.getInputLabelProps,i=n.getInputProps,c=n.getTagProps,s=n.getListboxProps,f=n.getOptionProps,p=n.groupedOptions,b=n.value,g=n.focused,E=n.setAnchorEl;return Object(a.useEffect)((function(){t(b)}),[b,t]),l.a.createElement(d.a,null,l.a.createElement("div",null,l.a.createElement("div",r(),l.a.createElement(w,o(),e.label),l.a.createElement(j,{ref:E,className:g?"focused":""},b.map((function(e,t){return l.a.createElement(y,Object.assign({label:e.title},c({index:t})))})),l.a.createElement("input",i()))),p.length>0?l.a.createElement(O,s(),p.map((function(e,t){return l.a.createElement("li",f({option:e,index:t}),l.a.createElement("span",null,e.title),l.a.createElement(m.a,{fontSize:"small"}))}))):null))}var C=n(101),S=(n(244),n(266)),D=function(e){var t=Object(a.useState)({width:"100vh",height:"80vh",position:"",longitude:1.975731,latitude:41.266965,zoom:15}),n=Object(i.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(null),s=Object(i.a)(c,2),u=s[0],d=s[1];return l.a.createElement("div",null,l.a.createElement(C.c,Object.assign({},r,{mapboxApiAccessToken:"pk.eyJ1IjoieGF2aW90cCIsImEiOiJja2F5Mnlnd3EwYzF1MzR1bG56czNnNnY4In0.LzCEft2g_0N9kuHVBgi8cA",mapStyle:"mapbox://styles/mapbox/dark-v10",onViewportChange:function(e){o(e)}}),e.dades.map((function(e,t){return l.a.createElement(C.a,{key:t,latitude:e.coord.lat,longitude:e.coord.lon},l.a.createElement(S.a,{onClick:function(t){t.preventDefault(),d(e)}},l.a.createElement("img",{src:"./assets/puntCalent.png",alt:e.carrer})))})),u?l.a.createElement(C.b,{latitude:u.coord.lat,longitude:u.coord.lon,onClose:function(){return d(null)}},l.a.createElement("div",null,l.a.createElement("h2",null,u.tipus," - ",u.data.toDateString("es-ES")," "),l.a.createElement("h3",null,u.carrer),l.a.createElement("div",null,u.comentari),l.a.createElement("p",null,u.coord.lat," - ",u.coord.lon))):null))},F=n(223),I=n(131),z=function(e,t){var n=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],l=t[1],r=Object(a.useState)(null),o=Object(i.a)(r,2),c=o[0],s=o[1],u=Object(a.useState)(!1),d=Object(i.a)(u,2),f=d[0],m=d[1];return Object(a.useEffect)((function(){m(!0),fetch("https://spreadsheets.google.com/feeds/list/".concat("1J397_lR00rFSGxef9nFUMVwTXFPIf0FDes9xb7_-K7M","/od6/public/basic?alt=json")).then((function(e){return e.json()})).then((function(e){l(function(e){return e.map((function(e){return e.content.$t}))}(e.feed.entry)),m(!1)})).catch((function(e){s(e),m(!1)}))}),[]),{dadesFromGoogle:n,error:c,loading:f}}(),l=n.dadesFromGoogle,r=n.error,o=n.loading,c=function(e,t,n){var a=e.map((function(e){return e.split(",")})).map((function(e){console.log("ELEM:",e);var t=e[2].split(":"),n=e[3].split(":"),a=e[5].split(":"),l=e[6].split(":"),r=e[8].split(":"),o=e[0].split(":");return console.log("_comentari:",r[1]),o=new Date(o[1].trimLeft()),console.log("_data:",o),Object(I.a)(Object(I.a)({},{coord:{lat:0,lon:0}}),{},{coord:{lat:parseFloat(t[1]),lon:parseFloat(n[1])},tipus:l[1].trimLeft(),carrer:a[1],data:o,comentari:r[1]})})),l=function(e){if(e){var t=[];return e.forEach((function(e){t.push(e.tipus)})),Object(F.a)(new Set(t)).map((function(e){return{title:e}})).sort()}return[]}(a);return console.log("inicidencies:",a),console.log("tipus:",l),{tipusIncidencies:l,incidencies:a}}(l);return{tipusIncidencies:c.tipusIncidencies,incidencies:c.incidencies,error:r,loading:o}},L=n(129),P=n(267),R=n(273),N=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(L.a,{display:"flex",style:{width:"-webkit-fill-available",justifyContent:"center"}},l.a.createElement(P.a,null," Oooops! sembla que hi ha hagut algun problema: ",e.err.message)))},T=n(268),A=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(L.a,{display:"flex",style:{width:"-webkit-fill-available",justifyContent:"center"}},l.a.createElement(P.a,{color:"textPrimary"}," Ruidos en Castelldefels Playa ")),l.a.createElement(L.a,{display:"flex",style:{width:"-webkit-fill-available",justifyContent:"center"}},l.a.createElement(T.a,null)),l.a.createElement(L.a,{display:"flex",style:{width:"-webkit-fill-available",justifyContent:"center"}},l.a.createElement(P.a,{color:"textPrimary"},"  ",e.text," ")))},M=n(220),B=function(e){var t=l.a.useState(!0),n=Object(i.a)(t,2),a=n[0],r=n[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(M.DateRangePicker,{open:!0,toggle:function(){r(!a)},closeOnClickOutside:!1,onChange:function(t){!function(t){console.log("Range:",t),e.onChangeDate(t)}(t)}}))},G=n(222),J=n.n(G),_=n(213),V=n(269),W=n(270),Y=Object(_.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"2 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),$=function(e){var t=e.incidencies,n=Y();return l.a.createElement("div",{className:"cardsContainer"},t.sort((function(e,t){return t.data.getTime()-e.data.getTime()})).map((function(e){return l.a.createElement("div",{className:"card"},l.a.createElement(V.a,{className:n.root,variant:"outlined"},l.a.createElement(W.a,null,l.a.createElement(P.a,{variant:"h5"},"Data: ",e.data.toLocaleDateString()),l.a.createElement(P.a,{variant:"h6"},"Tipus: ",e.tipus),l.a.createElement(P.a,null,"Carrer: ",e.carrer),l.a.createElement(P.a,null,"Comentari:",e.comentari),l.a.createElement(P.a,null,"Lat: ",e.coord.lat),l.a.createElement(P.a,null,"Long: ",e.coord.lat))))})))};var q=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)({}),c=Object(i.a)(o,2),s=c[0],u=c[1],d=z(n,s),f=d.tipusIncidencies,m=d.incidencies,p=d.error,b=d.loading,g=Object(a.useState)(!1),E=Object(i.a)(g,2),h=E[0],x=E[1],v=function(e){console.log("Estat: ",h),x((function(e){return!e}))},w=function(e,t,n){return t.filter((function(t){return e&&0===Object.entries(e).length?n.some((function(e){return e.title===t.tipus})):n.some((function(n){return n.title===t.tipus&&t.data>=e.startDate&&t.data<=e.endDate}))}))}(s,m,n);return l.a.createElement(l.a.Fragment,null,!p&&!b&&l.a.createElement("div",{className:"App"},l.a.createElement(L.a,{display:"flex",style:{flexDirection:"column",alignItems:"flex-start",width:"-webkit-fill-available"}},l.a.createElement(L.a,{display:"flex",style:{width:"-webkit-fill-available",justifyContent:"center"}},l.a.createElement(k,{selected:n,setSelected:r,label:"",incidences:f}),l.a.createElement("button",{onClick:v},l.a.createElement("span",{role:"img","aria-label":"filtre"},"\ud83d\udcc5")," FILTRAR DATES "),0!==Object.entries(s).length&&l.a.createElement("button",{onClick:function(){u({})}}," ",l.a.createElement("span",{role:"img","aria-label":"reset"},"\ud83d\uddd1\ufe0f")," SENSE FILTRE ")),l.a.createElement(L.a,{display:"flex",style:{width:"-webkit-fill-available",justifyContent:"center"}},l.a.createElement(P.a,{color:"textPrimary",variant:"h5",gutterBottom:!0}," Incid\xe8ncies: "," ",l.a.createElement(J.a,{start:0,end:w.length,duration:1.25}))),0!==Object.entries(s).length&&l.a.createElement(L.a,{display:"flex",style:{width:"-webkit-fill-available",justifyContent:"center"}},l.a.createElement(P.a,{color:"colorSecondary"}," Filtre actiu: "," "," "),l.a.createElement(P.a,{color:"error"}," ",s.startDate.toLocaleDateString()),l.a.createElement(P.a,{color:"colorSecondary"}," - "," "),l.a.createElement(P.a,{color:"error"}," ",s.endDate.toLocaleDateString())),l.a.createElement(L.a,{display:"flex",style:{width:"-webkit-fill-available",justifyContent:"center"}},l.a.createElement(D,{dades:w})),l.a.createElement(L.a,{display:"flex",style:{width:"-webkit-fill-available",justifyContent:"center"}},l.a.createElement(P.a,null," REC-PL: Ruidos en Castelldefels Playa - Per un millor barri - ")),l.a.createElement(L.a,{display:"flex",style:{width:"-webkit-fill-available",justifyContent:"center"}},h?l.a.createElement(R.a,{open:h,onClose:function(){v()},elevation:20,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},l.a.createElement(P.a,{align:"center"},"  Selecciona dues dates o un rang a la columna de la dreta - ESC per sortir"),l.a.createElement(B,{onChangeDate:function(e){console.log("Incidencies:",m),u((function(t){return e})),x(!1)}})):null),0!==w.length?l.a.createElement($,{incidencies:w}):null)),!!p&&l.a.createElement(N,{err:p}),!!b&&l.a.createElement(A,{text:"Carregant dades"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[233,1,2]]]);
//# sourceMappingURL=main.d1ee06fc.chunk.js.map